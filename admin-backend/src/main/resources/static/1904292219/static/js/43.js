webpackJsonp([43],{rpWp:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var o={data:function(){return{roleName:"",roleId:"",title:"用户导入",dialogVisible:!1,importUrl:"",fileList:[],roleList:[]}},computed:{myData:function(){return{roleId:this.roleId,roleName:this.roleName}}},methods:{init:function(){this.importUrl=this.$http.adornUrl("/sys/user/import?token="+this.$cookie.get("token")),this.fileList=[],this.dialogVisible=!0,this.getRoleList()},uploadSuccess:function(t){var e=t.returncode,i=t.msg;this.open(i,e)},uploadError:function(t){this.open("500","文件导入异常！")},open:function(t,e){"000"==e?(this.$message.info(t),this.$emit("refreshDataList")):this.$message.error(t)},getRoleList:function(){var t=this;this.$http({url:this.$http.adornUrl("/sys/role/select"),method:"get"}).then(function(e){var i=e.data;i&&0===i.code?t.roleList=i.list:t.roleList=[]})},selectGet:function(t){var e;e=this.roleList.find(function(e){return e.roleName===t}),this.roleId=e.roleId},beforeUpload:function(t){var e=t.name.substring(t.name.lastIndexOf(".")).toLowerCase();if(".xls,.xlsx".indexOf(e)<=-1)return this.$message.error("文件格式错误"),!1;this.processing=!0},getList:function(){this.$emit("refreshDataList")},submitUpload:function(){var t=this;t.dialogVisible=!1,t.roleName="",t.$refs.upload.submit();setTimeout(function(){t.$emit("refreshDataList")},1e3)}}},l={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(e){t.dialogVisible=e}}},[i("el-form",{attrs:{size:"mini","label-width":"90px"}},[i("el-form-item",{attrs:{label:"用户角色",prop:"roleName"}},[i("el-select",{attrs:{label:"角色",placeholder:"请选择"},on:{change:t.selectGet},model:{value:t.roleName,callback:function(e){t.roleName=e},expression:"roleName"}},t._l(t.roleList,function(t){return i("el-option",{key:t.roleId,attrs:{label:t.roleName,value:t.roleName}})}))],1),t._v(" "),i("el-form-item",{attrs:{label:"选择文件",prop:"roleName"}},[i("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{"margin-left":"50px"},attrs:{action:t.importUrl,"before-upload":t.beforeUpload,"auto-upload":!1,"file-list":t.fileList,limit:"1",data:t.myData}},[i("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")])],1)],1)],1),t._v(" "),i("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),t.isAuth("train:score:import")?i("el-button",{attrs:{type:"primary"},on:{click:t.submitUpload}},[t._v("确 定")]):t._e()],1)],1)},staticRenderFns:[]},r=i("46Yf")(o,l,!1,null,null,null);e.default=r.exports}});