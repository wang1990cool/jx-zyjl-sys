webpackJsonp([37],{njPW:function(t,a,r){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e={data:function(){var t=this;return{visible:!1,isDetail:!1,title:"",dataForm:{id:0,projectId:"",projectName:"",projectBudget:"",trainingPlan:"",auditOption:"",applicantId:"",applicantName:"",applicantDept:"",auditorId:"",auditorName:"",auditTime:"",status:"",statusCode:"",trainClassHour:"",trainTarget:"",classHourAllocation:"",trainRequire:""},dataRule:{projectId:[{required:!0,validator:function(a,r,e){""===r?e(new Error("培训编号不能为空")):t.$http({url:t.$http.adornUrl("/train/project/checkProjectIdIsExists/"+r),method:"get",params:t.$http.adornParams()}).then(function(t){var a=t.data;a&&0!==a.code?e(new Error("培训编号已存在")):e()})},trigger:"blur"}],projectName:[{required:!0,message:"培训名称不能为空",trigger:"blur"}],projectBudget:[{required:!0,validator:function(t,a,r){!1===/^\d+(\.\d+)?$/.test(a)?r(new Error("请输入数字")):r()},trigger:"blur"}]}}},methods:{init:function(t,a){var r=this;this.isDetail=a,this.dataForm.id=t||0,this.title=a?"详情":this.dataForm.id?"修改":"新增",this.visible=!0,this.$nextTick(function(){r.$refs.dataForm.resetFields(),r.dataForm.id&&r.$http({url:r.$http.adornUrl("/train/project/info/"+r.dataForm.id),method:"get",params:r.$http.adornParams()}).then(function(t){var a=t.data;a&&0===a.code&&(r.dataForm.projectId=a.trainProject.projectId,r.dataForm.projectName=a.trainProject.projectName,r.dataForm.projectBudget=a.trainProject.projectBudget,r.dataForm.trainingPlan=a.trainProject.trainingPlan,r.dataForm.auditOption=a.trainProject.auditOption,r.dataForm.applicantId=a.trainProject.applicantId,r.dataForm.applicantName=a.trainProject.applicantName,r.dataForm.applicantDept=a.trainProject.applicantDept,r.dataForm.auditorId=a.trainProject.auditorId,r.dataForm.auditorName=a.trainProject.auditorName,r.dataForm.auditTime=a.trainProject.auditTime,r.dataForm.status=a.trainProject.status,r.dataForm.statusCode=a.trainProject.statusCode,r.dataForm.trainClassHour=a.trainProject.trainClassHour,r.dataForm.trainTarget=a.trainProject.trainTarget,r.dataForm.classHourAllocation=a.trainProject.classHourAllocation,r.dataForm.trainRequire=a.trainProject.trainRequire)})})},dataFormSubmit:function(){var t=this;this.$refs.dataForm.validate(function(a){a&&t.$http({url:t.$http.adornUrl("/train/project/"+(t.dataForm.id?"update":"save")),method:"post",data:t.$http.adornData({id:t.dataForm.id||void 0,projectId:t.dataForm.projectId,projectName:t.dataForm.projectName,projectBudget:t.dataForm.projectBudget,trainingPlan:t.dataForm.trainingPlan,auditOption:t.dataForm.auditOption,applicantId:t.dataForm.applicantId,applicantName:t.dataForm.applicantName,applicantDept:t.dataForm.applicantDept,auditorId:t.dataForm.auditorId,auditorName:t.dataForm.auditorName,auditTime:t.dataForm.auditTime,status:"草稿状态",statusCode:"1",trainClassHour:t.dataForm.trainClassHour,trainTarget:t.dataForm.trainTarget,classHourAllocation:t.dataForm.classHourAllocation,trainRequire:t.dataForm.trainRequire})}).then(function(a){var r=a.data;r&&0===r.code?t.$message({message:"操作成功",type:"success",duration:1500,onClose:function(){t.visible=!1,t.$emit("refreshDataList")}}):t.$message.error(r.msg)})})}}},o={render:function(){var t=this,a=t.$createElement,r=t._self._c||a;return r("el-dialog",{attrs:{title:t.title,"close-on-click-modal":!1,visible:t.visible},on:{"update:visible":function(a){t.visible=a}}},[r("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,size:"mini","label-width":"130px"},nativeOn:{keyup:function(a){if(!("button"in a)&&t._k(a.keyCode,"enter",13,a.key))return null;t.dataFormSubmit()}}},[r("el-form-item",{attrs:{label:"培训编号",prop:"projectId",disabled:t.isDetail}},[r("el-input",{attrs:{placeholder:"项目编号"},model:{value:t.dataForm.projectId,callback:function(a){t.$set(t.dataForm,"projectId",a)},expression:"dataForm.projectId"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"培训名称",prop:"projectName"}},[r("el-input",{attrs:{placeholder:"项目名称"},model:{value:t.dataForm.projectName,callback:function(a){t.$set(t.dataForm,"projectName",a)},expression:"dataForm.projectName"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"预算金额",prop:"projectBudget"}},[r("el-input",{attrs:{placeholder:"项目预算"},model:{value:t.dataForm.projectBudget,callback:function(a){t.$set(t.dataForm,"projectBudget",a)},expression:"dataForm.projectBudget"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"培训课时",prop:"trainClassHour"}},[r("el-input",{attrs:{placeholder:"培训课时"},model:{value:t.dataForm.trainClassHour,callback:function(a){t.$set(t.dataForm,"trainClassHour",a)},expression:"dataForm.trainClassHour"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"培训目标",prop:"trainTarget"}},[r("el-input",{attrs:{type:"textarea",placeholder:"培训目标"},model:{value:t.dataForm.trainTarget,callback:function(a){t.$set(t.dataForm,"trainTarget",a)},expression:"dataForm.trainTarget"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"课时分配",prop:"classHourAllocation"}},[r("el-input",{attrs:{type:"textarea",placeholder:"课时分配"},model:{value:t.dataForm.classHourAllocation,callback:function(a){t.$set(t.dataForm,"classHourAllocation",a)},expression:"dataForm.classHourAllocation"}})],1),t._v(" "),r("el-form-item",{attrs:{label:"培训要求",prop:"trainRequire"}},[r("el-input",{attrs:{type:"textarea",placeholder:"培训要求"},model:{value:t.dataForm.trainRequire,callback:function(a){t.$set(t.dataForm,"trainRequire",a)},expression:"dataForm.trainRequire"}})],1),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t._e(),t._v(" "),t._e()],1),t._v(" "),r("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:function(a){t.visible=!1}}},[t._v("取消")]),t._v(" "),t.isDetail?t._e():r("el-button",{attrs:{type:"primary"},on:{click:function(a){t.dataFormSubmit()}}},[t._v("确定")])],1)],1)},staticRenderFns:[]},i=r("46Yf")(e,o,!1,null,null,null);a.default=i.exports}});