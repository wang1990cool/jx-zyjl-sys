webpackJsonp([32],{uFP8:function(t,i,e){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var o={render:function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("el-dialog",{attrs:{title:t.title,visible:t.dialogVisible,width:"30%"},on:{"update:visible":function(i){t.dialogVisible=i}}},[e("el-upload",{ref:"upload",staticClass:"upload-demo",staticStyle:{"margin-left":"50px"},attrs:{action:t.importUrl,"before-upload":t.beforeUpload,"auto-upload":!1,"file-list":t.fileList}},[e("el-button",{attrs:{slot:"trigger",size:"small",type:"primary"},slot:"trigger"},[t._v("选取文件")]),t._v(" "),e("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t._v("只能上传xls/xlsx文件")])],1),t._v(" "),e("div",{staticClass:"download-template",staticStyle:{"margin-left":"50px"}},[e("a",{staticClass:"btn-download",on:{click:t.download}},[e("i",{staticClass:"icon-download"}),t._v("下载模板")])]),t._v(" "),e("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[e("el-button",{on:{click:function(i){t.dialogVisible=!1}}},[t._v("取 消")]),t._v(" "),t.isAuth("train:score:import")?e("el-button",{attrs:{type:"primary"},on:{click:t.submitUpload}},[t._v("确 定")]):t._e()],1)],1)},staticRenderFns:[]},s=e("46Yf")({data:function(){return{title:"成绩导入",dialogVisible:!1,importUrl:"",fileList:[]}},methods:{init:function(){this.importUrl=this.$http.adornUrl("/train/score/import?token="+this.$cookie.get("token")),this.fileList=[],this.dialogVisible=!0},uploadSuccess:function(t){var i=t.returncode,e=t.msg;this.open(e,i)},uploadError:function(t){this.open("500","文件导入异常！")},open:function(t,i){"000"==i?(this.$message.info(t),this.$emit("refreshDataList")):this.$message.error(t)},beforeUpload:function(t){var i=t.name.substring(t.name.lastIndexOf(".")).toLowerCase();if(".xls,.xlsx".indexOf(i)<=-1)return this.$message.error("文件格式错误"),!1;this.processing=!0},submitUpload:function(){this.$refs.upload.submit()},download:function(){this.$http.adornUrl("/train/score/download?token="+this.$cookie.get("token"))}}},o,!1,null,null,null);i.default=s.exports}});